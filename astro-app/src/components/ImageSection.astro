---
import { getAssetById } from '../utils/content';

export interface Props {
  image_id: string;
}

const { image_id } = Astro.props;

// 從 asset-manifest 查詢圖片
const asset = await getAssetById(image_id);
---

{asset ? (
  <section class="py-10">
    <div class="max-w-[1200px] mx-auto px-6">
      <picture class="block w-full aspect-video bg-secondary dark:bg-dark-800 rounded-lg overflow-hidden">
        <source media="(min-width: 1024px)" srcset={asset.variants.desktop} />
        <source media="(max-width: 1023px)" srcset={asset.variants.mobile} />
        <img
          src={asset.variants.desktop}
          alt={asset.alt}
          class="block w-full h-full object-cover rounded-lg shadow-card"
          loading="lazy"
          decoding="async"
        />
      </picture>
    </div>
  </section>
) : (
  <section class="py-10 bg-red-50 dark:bg-red-900/20">
    <div class="max-w-[1200px] mx-auto px-6">
      <p class="text-red-600 dark:text-red-400 text-sm text-center p-5">圖片未找到: {image_id}</p>
    </div>
  </section>
)}
