---
export interface ContactField {
  name: string;
  label: string;
  placeholder?: string;
  required?: boolean;
  type?: 'text' | 'email' | 'tel' | 'textarea';
}

export interface Props {
  label?: string;
  title: string;
  fields: ContactField[];
  button_text: string;
}

const { label, title, fields, button_text } = Astro.props;

// Separate fields into grid (text inputs) and full-width (textarea)
const gridFields = fields.filter(f => f.type !== 'textarea');
const textareaFields = fields.filter(f => f.type === 'textarea');
---

<section class="py-20 max-md:py-[60px] bg-primary dark:bg-dark-900">
  <div class="max-w-[960px] mx-auto px-6 max-md:px-4">
    {label && (
      <span class="block text-sm font-medium text-brand uppercase tracking-[1px] mb-2 text-center">
        {label}
      </span>
    )}
    <h2 class="text-4xl max-md:text-[28px] font-bold text-brand mb-12 max-md:mb-8 text-center">
      {title}
    </h2>

    <form class="max-w-[800px] mx-auto" action="#" method="POST">
      <div class="grid grid-cols-2 max-md:grid-cols-1 gap-6 max-md:gap-4 mb-6">
        {gridFields.map((field) => (
          <div class="flex flex-col">
            <label class="text-sm font-semibold text-brand mb-2" for={field.name}>
              {field.label}
            </label>
            <input
              type={(field.type as 'text' | 'email' | 'tel') || 'text'}
              id={field.name}
              name={field.name}
              placeholder={field.placeholder || ''}
              required={field.required}
              class="w-full px-4 py-3.5 max-md:py-3 text-[15px] max-md:text-base
                     border border-default rounded bg-primary dark:bg-dark-800
                     text-primary dark:text-white placeholder:text-tertiary
                     transition-all duration-300
                     focus:outline-none focus:border-brand focus:shadow-[0_0_0_3px_rgba(63,134,150,0.1)]"
            />
          </div>
        ))}
      </div>

      {textareaFields.map((field) => (
        <div class="flex flex-col mb-6">
          <label class="text-sm font-semibold text-brand mb-2" for={field.name}>
            {field.label}
          </label>
          <textarea
            id={field.name}
            name={field.name}
            placeholder={field.placeholder || ''}
            required={field.required}
            rows="6"
            class="w-full px-4 py-3.5 max-md:py-3 text-[15px] max-md:text-base
                   border border-default rounded bg-primary dark:bg-dark-800
                   text-primary dark:text-white placeholder:text-tertiary
                   transition-all duration-300 resize-y min-h-[150px]
                   focus:outline-none focus:border-brand focus:shadow-[0_0_0_3px_rgba(63,134,150,0.1)]"
          ></textarea>
        </div>
      ))}

      <button
        type="submit"
        class="block w-full px-8 py-4 max-md:px-6 max-md:py-3.5
               text-base max-md:text-[15px] font-semibold text-white
               bg-gray-600 dark:bg-gray-500 border-none rounded cursor-pointer
               transition-all duration-300
               hover:bg-gray-500 hover:-translate-y-0.5
               active:translate-y-0"
      >
        {button_text}
      </button>
    </form>
  </div>
</section>
