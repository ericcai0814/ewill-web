---
import type { ResolvedImage } from '../utils/content';

export interface Props {
  image: ResolvedImage;
  overlay?: boolean;
  height?: 'full' | 'auto';
}

const { image, overlay = false, height = 'auto' } = Astro.props;
---

<section class:list={[
  'relative w-full overflow-hidden',
  height === 'full' && 'h-screen min-h-[600px]'
]}>
  <picture class:list={[
    'block w-full h-full aspect-[16/5] bg-dark-900',
    overlay && 'absolute inset-0'
  ]}>
    <source media="(min-width: 1024px)" srcset={image.desktop} />
    <source media="(max-width: 1023px)" srcset={image.mobile} />
    <img
      src={image.desktop}
      alt={image.alt}
      class="block w-full h-full object-cover"
      width="1920"
      height="600"
      loading="eager"
      decoding="async"
    />
  </picture>
  {overlay && (
    <div class="absolute inset-0 bg-gradient-to-b from-black/30 via-black/10 to-black/40 pointer-events-none"></div>
  )}
  <slot />
</section>
