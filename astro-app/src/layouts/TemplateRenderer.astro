---
/**
 * TemplateRenderer.astro
 *
 * 根據頁面的 template 欄位選擇對應的 Template 渲染
 * 如果沒有指定 template，fallback 到 GeneralPageTemplate
 */
import ProductPageTemplate from './templates/ProductPageTemplate.astro';
import SolutionPageTemplate from './templates/SolutionPageTemplate.astro';
import EventPageTemplate from './templates/EventPageTemplate.astro';
import GeneralPageTemplate from './templates/GeneralPageTemplate.astro';
import AboutPageTemplate from './templates/AboutPageTemplate.astro';
import ContactPageTemplate from './templates/ContactPageTemplate.astro';
import HomePageTemplate from './templates/HomePageTemplate.astro';
import type { PageContent } from '../utils/content';

export interface Props {
  page: PageContent;
}

const { page } = Astro.props;

// 取得 template 設定（yml 中的 template 欄位）
const template = page.template || page.layout?.template;

// Template 映射表
const TEMPLATE_MAP: Record<string, any> = {
  'product': ProductPageTemplate,
  'solution': SolutionPageTemplate,
  'event': EventPageTemplate,
  'general': GeneralPageTemplate,
  'about': AboutPageTemplate,
  'service': GeneralPageTemplate,  // 暫用 GeneralPageTemplate
  'contact': ContactPageTemplate,
  'home': HomePageTemplate,
};

// 選擇 Template（有指定則用指定的，否則 fallback 到 GeneralPageTemplate）
const SelectedTemplate = template && TEMPLATE_MAP[template]
  ? TEMPLATE_MAP[template]
  : GeneralPageTemplate;
---

<SelectedTemplate page={page} />
